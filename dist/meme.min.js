(function(){this.CanvasElement=function(){function a(a){this.canvas=document.querySelector(a),this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="source-over",this.width=this.canvas.width,this.height=this.canvas.height}return a.prototype.elements=[],a.prototype.draw=function(){var a,b,c,d,e;for(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),d=this.elements,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.draw());return e},a.prototype.addElement=function(a){var b;return b=new a(this.context,this),this.elements.push(b),b},a}()}).call(this),function(){this.DrawableElement=function(){function a(a,b){this.context=a,this.canvasElement=b,null!=this.afterInit&&this.afterInit()}return a.prototype.attributes={},a.prototype.set=function(a,b){return null!=this["set"+a]?this["set"+a](b):this.attributes[a]=b,this.canvasElement.draw()},a.prototype.draw=function(){return null!=this.beforeDraw&&this.beforeDraw(),null!=this.drawing&&this.drawing(),this.context.fill(),null!=this.afterDraw?this.afterDraw():void 0},a}()}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};this.ImageElement=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.attributes={x:0,y:0,url:"http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg"},c.prototype.afterInit=function(){return this.url=this.attributes.url,this.image=new Image,this.image.onload=this.imageLoaded.bind(this)},c.prototype.seturl=function(a){return null==a&&(a=null),this.url!==a&&null!==a&&(this.url=a),this.image.src=this.url},c.prototype.imageLoaded=function(){return this.canvasElement.canvas.width=this.image.width,this.canvasElement.canvas.height=this.image.height,this.canvasElement.draw()},c.prototype.drawing=function(){return this.context.drawImage(this.image,this.attributes.x,this.attributes.y)},c}(DrawableElement)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};this.TextElement=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.attributes={x:0,y:0,font:"10pt Arial",style:"white",text:"",align:"center",strokeStyle:"black",strokeWidth:1,stroke:!1},c.prototype.drawing=function(){var a;return this.context.font=this.attributes.font,this.context.textAlign=this.attributes.align,this.attributes.stroke&&(a=this.context.lineWidth,this.context.lineWidth=this.attributes.strokeWidth,this.context.strokeStyle=this.attributes.strokeStyle,this.context.strokeText(this.attributes.text,this.attributes.x,this.attributes.y),this.context.lineWidth=a),this.context.fillStyle=this.attributes.style,this.context.fillText(this.attributes.text,this.attributes.x,this.attributes.y)},c}(DrawableElement)}.call(this);